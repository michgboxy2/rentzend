(this["webpackJsonprentzend-client"]=this["webpackJsonprentzend-client"]||[]).push([[0],{131:function(e,n,a){e.exports=a(150)},136:function(e,n,a){},143:function(e,n,a){},146:function(e,n,a){},150:function(e,n,a){"use strict";a.r(n);var t=a(125),r=a(0),i=a.n(r),o=a(12),l=a.n(o),s=a(54),c=a(120),m=a(123),u=a(119),d=a(9),p=a(108),h=a(109),b=a(122),f=a(124),v=a(117),g=a(53),E=(a(136),a(188)),w=a(43),y=a(44),k=a.n(y);function S(){var e=Object(w.a)(["\n    {\n        me{\n            name\n            email\n            phoneNumber\n            zipCode\n            address\n          }\n    }\n"]);return S=function(){return e},e}var j=k()(S()),O=Object(E.a)(j)((function(e){var n=sessionStorage.getItem("token"),a=e.data,t=(a.loading,a.error,a.me);return e.data.refetch(),n||e.history.push("/login"),t?i.a.createElement("div",null,i.a.createElement("h3",null,"Welcome to RentZend")," ",i.a.createElement("h2",null,t.name),i.a.createElement("p",null,"Email: ",t.email),i.a.createElement("p",null,"PhoneNumber: ",t.phoneNumber),i.a.createElement("p",null,"Address: ",t.address)):i.a.createElement("div",null,"Welcome to RentZend")})),N=a(38),$=a.n(N),x=a(60),C=a(121),I=a(182),z=a(187);function U(){var e=Object(w.a)(["\n    mutation($file : Upload! ){\n        singleUpload(file: $file){\n      filename\n      mimetype\n      encoding\n    }\n  }\n\n"]);return U=function(){return e},e}var q=Object(I.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"}}})),A=k()(U()),F=Object(E.a)(A)((function(e){sessionStorage.getItem("token")||e.history.push("/login");var n=Object(r.useState)({}),a=Object(C.a)(n,2),t=a[0],o=a[1],l=q();return onsubmit=function(){var n=Object(x.a)($.a.mark((function n(a){var r;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.mutate({variables:{file:t}});case 3:(r=n.sent).data.singleUpload.filename&&(alert("upload successful"),e.history.push("/home")),r.errors&&alert(r.errors[0].message),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),alert("file upload failed");case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}(),i.a.createElement("div",{className:l.root},i.a.createElement("input",{accept:"image/*",className:l.input,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){o(e.target.files[0])}}),i.a.createElement("p",null,t.name),i.a.createElement("label",{htmlFor:"contained-button-file"},i.a.createElement(z.a,{variant:"contained",color:"primary",component:"span"},"SELECT FILE")),i.a.createElement("button",{variant:"contained",color:"primary",type:"submit",onClick:onsubmit},"Upload "))})),W=a(40),L=a(32),V=a(186),R=(a(143),function(e){var n=e.name,a=e.label,t=e.type,r=void 0===t?"text":t;return(i.a.createElement("div",{className:"FormikField"},i.a.createElement(W.b,{required:!0,autoComplete:"off",as:V.a,label:a,name:n,fullWidth:!0,type:r,helperText:i.a.createElement(W.a,{name:n})})))});function Z(){var e=Object(w.a)(["\n        mutation SignUp($email : String!, $password : String!, $name: String!,$zipCode : String!, $address : String!, $phoneNumber: String!){\n                signUp(name: $name, email: $email, password: $password, phoneNumber: $phoneNumber, address: $address, zipCode: $zipCode){\n                   token\n                   verified\n                  }\n        }\n"]);return Z=function(){return e},e}sessionStorage.removeItem("token");var B={name:"",email:"",address:"",password:"",zipCode:"",phoneNumber:""},J=L.b().shape({name:L.c().required(),phoneNumber:L.a("only numbers are allowed").required("required").positive().integer(),email:L.c().email("enter email"),address:L.c().required(),zipCode:L.a().required().positive().integer(),password:L.c().required()}),P=k()(Z()),T=Object(E.a)(P)((function(e){var n=function(){var n=Object(x.a)($.a.mark((function n(a){var t,r,i,o,l,s,c;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.name,r=a.email,i=a.phoneNumber,o=a.address,l=a.zipCode,s=a.password,n.prev=1,n.next=4,e.mutate({variables:{name:t,email:r,phoneNumber:i,address:o,zipCode:l,password:s}});case 4:c=n.sent,sessionStorage.setItem("token",c.data.signUp.token),c&&("false"===c.data.signUp.verified?e.history.push("/kyc"):e.history.push("/home")),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),alert("Agent registration failed");case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}();return(i.a.createElement("div",null,i.a.createElement("h1",null,"Signup"),i.a.createElement(W.d,{initialValues:B,onSubmit:n,validationSchema:J},(function(e){var n=e.dirty;e.isValid;return(i.a.createElement(W.c,null,i.a.createElement(R,{label:"Name",name:"name"}),i.a.createElement(R,{label:"Email",name:"email"}),i.a.createElement(R,{label:"Address",name:"address"}),i.a.createElement(R,{label:"Phone Number",name:"phoneNumber"}),i.a.createElement(R,{label:"Zip Code",name:"zipCode"}),i.a.createElement(R,{label:"password",name:"password",type:"password"}),i.a.createElement(z.a,{variant:"contained",color:"primary",disabled:!n,type:"submit"},"Register ")))}))))}));function D(){var e=Object(w.a)(["\n        mutation SignUp($email : String!, $password : String!){\n                signIn(email: $email, password: $password){\n                   token\n                   verified\n                  }\n        }\n"]);return D=function(){return e},e}sessionStorage.removeItem("token");var G={name:"",email:"",address:"",password:"",zipCode:"",phoneNumber:""},H=L.b().shape({email:L.c().email("enter email"),password:L.c().required()}),K=k()(D()),M=Object(E.a)(K)((function(e){var n=function(){var n=Object(x.a)($.a.mark((function n(a){var t,r,i,o,l,s,c;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.name,r=a.email,i=a.phoneNumber,o=a.address,l=a.zipCode,s=a.password,n.prev=1,n.next=4,e.mutate({variables:{name:t,email:r,phoneNumber:i,address:o,zipCode:l,password:s}});case 4:c=n.sent,sessionStorage.setItem("token",c.data.signIn.token),c&&("false"===c.data.signIn.verified?e.history.push("/kyc"):e.history.push("/home")),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),alert("Incorrect credentials");case 13:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}();return(i.a.createElement("div",null,i.a.createElement("h1",null,"Agent Signin"),i.a.createElement(W.d,{initialValues:G,onSubmit:n,validationSchema:H},(function(e){var n=e.dirty;e.isValid;return(i.a.createElement(W.c,null,i.a.createElement(R,{label:"Email",name:"email"}),i.a.createElement(R,{label:"password",name:"password",type:"password"}),i.a.createElement(z.a,{variant:"contained",color:"primary",disabled:!n,type:"submit"},"Login ")))}))))})),Q=function(e){Object(f.a)(a,e);var n=Object(b.a)(a);function a(){return Object(p.a)(this,a),n.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement(v.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(g.a,{exact:!0,path:"/",component:T}),i.a.createElement(g.a,{exact:!0,path:"/login",component:M}),i.a.createElement(g.a,{exact:!0,path:"/kyc",component:F}),i.a.createElement(g.a,{exact:!0,path:"/home",component:O})))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(145),a(146);var X=Object(u.createUploadLink)({uri:"http://127.0.0.1:5000/graphql"}),Y=Object(c.a)((function(e,n){var a=n.headers,r=sessionStorage.getItem("token");return{headers:Object(t.a)({},a,{"x-token":r?"".concat(r):""})}}));console.log(sessionStorage.getItem("token"));var _=new m.a({dataIdFromObject:function(e){return e.id}}),ee=new s.c({link:Y.concat(X),cache:_,headers:{"x-token":sessionStorage.getItem("token")}});l.a.render(i.a.createElement(d.b,{client:ee},i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.ec6f6788.chunk.js.map